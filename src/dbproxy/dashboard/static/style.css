* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #0d1117; color: #c9d1d9; }
header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; background: #161b22; border-bottom: 1px solid #30363d; }
h1 { font-size: 1.2rem; color: #58a6ff; }
h2 { font-size: 1rem; color: #8b949e; margin-bottom: 0.5rem; }
.status { padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem; font-weight: 600; }
.status.connected { background: #1b4332; color: #2dd4bf; }
.status.disconnected { background: #3b1c1c; color: #f87171; }
main { padding: 1.5rem 2rem; max-width: 1200px; margin: 0 auto; }
#summary { display: flex; gap: 1rem; margin-bottom: 1.5rem; }
.stat-card { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 1rem 1.5rem; flex: 1; }
.stat-value { font-size: 1.8rem; font-weight: 700; color: #58a6ff; }
.stat-label { font-size: 0.8rem; color: #8b949e; margin-top: 0.25rem; }
#conv-list { display: flex; flex-direction: column; gap: 0.5rem; }
.conv-card { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 1rem; display: grid; grid-template-columns: 1fr auto auto auto; gap: 1rem; align-items: center; cursor: pointer; transition: border-color 0.15s; }
.conv-card:hover { border-color: #58a6ff; }
.conv-card.conv-selected { border-color: #58a6ff; background: #1c2333; }
.conv-id { font-family: monospace; font-size: 0.9rem; color: #c9d1d9; }
.conv-model { font-size: 0.8rem; color: #8b949e; }
.phase-badge { padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
.phase-IDLE { background: #1c2128; color: #8b949e; }
.phase-CHECKPOINT_PENDING { background: #2d1f00; color: #f0b429; }
.phase-CHECKPOINTING { background: #2d1f00; color: #f0b429; }
.phase-WAL_ACTIVE { background: #0c2d48; color: #58a6ff; }
.phase-SWAP_READY { background: #1b4332; color: #2dd4bf; }
.phase-SWAP_EXECUTING { background: #1b4332; color: #2dd4bf; }
.utilization-bar { width: 120px; height: 8px; background: #21262d; border-radius: 4px; overflow: hidden; }
.utilization-fill { height: 100%; border-radius: 4px; transition: width 0.3s; }
.util-low { background: #2dd4bf; }
.util-mid { background: #f0b429; }
.util-high { background: #f87171; }
.btn-reset { background: #21262d; border: 1px solid #30363d; color: #c9d1d9; padding: 0.3rem 0.6rem; border-radius: 4px; cursor: pointer; font-size: 0.75rem; }
.btn-reset:hover { background: #30363d; }
#events { max-height: 300px; overflow-y: auto; font-family: monospace; font-size: 0.8rem; background: #0d1117; border: 1px solid #30363d; border-radius: 8px; padding: 0.5rem; }
.event-line { padding: 0.15rem 0.5rem; border-bottom: 1px solid #161b22; color: #8b949e; }
.event-line .event-type { color: #58a6ff; }

/* Detail panel */
.detail-panel { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 1rem; margin: 1rem 0; }
.detail-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
.detail-header h3 { font-size: 1rem; color: #58a6ff; font-family: monospace; }
.btn-close { background: none; border: none; color: #8b949e; font-size: 1.4rem; cursor: pointer; padding: 0 0.3rem; line-height: 1; }
.btn-close:hover { color: #c9d1d9; }
.detail-meta { font-size: 0.8rem; color: #8b949e; margin-bottom: 0.75rem; }
.detail-meta strong { color: #c9d1d9; }
.detail-section { margin-top: 1rem; }
.detail-section h3 { font-size: 0.85rem; color: #8b949e; margin-bottom: 0.5rem; }
.detail-error { color: #f87171; font-size: 0.85rem; }
.detail-empty { color: #484f58; font-size: 0.8rem; font-style: italic; }

/* Checkpoint content */
.checkpoint-content { background: #0d1117; border: 1px solid #30363d; border-radius: 6px; padding: 0.75rem; font-family: monospace; font-size: 0.75rem; color: #8b949e; white-space: pre-wrap; word-break: break-word; max-height: 200px; overflow-y: auto; }

/* Message list */
.msg-legend { display: flex; gap: 0.75rem; margin-bottom: 0.5rem; }
.legend-chip { font-size: 0.7rem; padding: 0.15rem 0.5rem; border-radius: 3px; }
.legend-checkpointed { background: #1c2128; color: #8b949e; }
.legend-wal { background: #0c2d48; color: #58a6ff; }
.msg-list { background: #0d1117; border: 1px solid #30363d; border-radius: 6px; max-height: 500px; overflow-y: auto; }
.msg-row { display: flex; gap: 0.5rem; padding: 0.35rem 0.6rem; border-bottom: 1px solid #161b22; font-size: 0.75rem; align-items: flex-start; }
.msg-row:last-child { border-bottom: none; }
.msg-row.msg-checkpointed { background: #0d1117; }
.msg-row.msg-wal { background: #0c1a2b; }
.msg-index { color: #484f58; font-family: monospace; min-width: 1.5rem; text-align: right; flex-shrink: 0; }
.msg-role { font-family: monospace; font-weight: 600; min-width: 5rem; flex-shrink: 0; }
.role-user { color: #7ee787; }
.role-assistant { color: #d2a8ff; }
.role-other { color: #8b949e; }
.msg-preview { color: #8b949e; white-space: pre-wrap; word-break: break-word; font-family: monospace; }
